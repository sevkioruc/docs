---
sidebar_position: 2
---

# Centralizing Authorization Data

Permify aims to unify your authorization data which behave as centralized data source used in access controls check 
as a source of truth. 

In Permify authorization data stored as [Relation Tuples] into your preferred database,
we called that database **writeDB**. And you can define it with YAML configuration file. 
Permify provides this YAML configuration file to structure where and how to convert and sync your authorization related data.

[relation tuples]: /docs/relational-tuples

***Example YAML config file:***

```yaml
app:
  name: 'permify'

http:
  port: 3476

logger:
  log_level: 'debug'
  rollbar_env: 'permify'

database:
  write:
    connection: 'postgres'
    database: 'db_name'
    uri: 'postgres://user:password@host:1241'
    pool_max: 20
```

- **WriteDB:** Where your want to store relation tuples, audits , and decision logs.

:::info
Since Permify is an open 
source solution, its better to have host databases in your servers for **low latency** and **high availability**.
:::

## Creating Custom Relational Tuples

In case you don't want a Permify listen your databases constanty. You can skip defining listenDB in config YAMl file and can create custom relational tuples manually. You can create custom relational tuples with using "/v1/relationships/write" endpoint.

**Path:** POST /v1/relationships/write

### Arguments Overview

| Argument | Type |  Description |
|-------------------|---------|-------------|
| entity | string | Type and id of the entity. Example: repository:1”|
| relation | string |  Custom relation name. Eg. admin, manager, viewer etc. |
| subject | string |  User or user set who wants to take the action. |

### Examples 

#### **Organization Admin**

Request

```json
{
    "entity": {
        "type": "organization",
        "id": "1"
    },
    "relation": "admin",
    "subject": {
        "type": "user",
        "id": "1",
        "relation": ""
    }
}
```

Response

```json
{
  "message": "success"
}
```

Created relational tuple: ***organization:1#admin@1***

Definition: user 1 has admin role on organization 1.

#### **Organization Members are Viewer of Repo** 

Request

```json
{
    "entity": {
        "type": "repository",
        "id": "1"
    },
    "relation": "viewer",
    "subject": {
        "type": "organization",
        "id": "2",
        "relation": "member"
    }
}
```

Response

```json
{
  "message": "success"
}
```

Created relational tuple: ***repository:1#admin@organization:2#member***

Definition: members of organization 2 are viewers of repository 1.

#### **#... case (Parent Organization)**

Request

```json
{
    "entity": {
        "type": "repository",
        "id": "1"
    },
    "relation": "parent",
    "subject": {
        "type": "organization",
        "id": "1",
        "relation": "..."
    }
}
```

Response

```json
{
  "message": "success"
}
```

Created relational tuple: ***repository:1#parent@organization:1#…***

Definition: organization 1 is parent of repository 1.

Note: “#...” represents a relation that does not affect the semantics of the tuple.